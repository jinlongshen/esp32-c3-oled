BasedOnStyle: LLVM

# --- Basic Layout ---
IndentWidth: 4
TabWidth: 4
UseTab: Never
ColumnLimit: 100

# --- Braces & Blocks ---
# This forces the Allman style (braces on new lines)
BreakBeforeBraces: Allman

# This forces braces to be added to 'if', 'else', 'for', 'while' 
# even if they are single-line (Requires clang-format 15+)
InsertBraces: true

# Disallow single-line shorthand
AllowShortFunctionsOnASingleLine: None
AllowShortIfStatementsOnASingleLine: false
AllowShortLoopsOnASingleLine: false
AllowShortBlocksOnASingleLine: false

# --- Indentation ---
NamespaceIndentation: None
IndentExternBlock: NoIndent

# --- Whitespace & Lines ---
MaxEmptyLinesToKeep: 1
AlignTrailingComments: true
SpacesBeforeTrailingComments: 1
ReflowComments: false

# --- Constructors ---
BreakConstructorInitializers: BeforeComma
ConstructorInitializerIndentWidth: 0

# --- Function Signatures ---
AlwaysBreakTemplateDeclarations: Yes
AlwaysBreakAfterReturnType: None
AlwaysBreakAfterDefinitionReturnType: None
PenaltyReturnTypeOnItsOwnLine: 1000

BinPackParameters: false
BinPackArguments: false
AllowAllParametersOfDeclarationOnNextLine: false
IndentWrappedFunctionNames: false

# --- Alignment ---
# PointerAlignment: Left means 'char* p'
PointerAlignment: Left
ReferenceAlignment: Left

SpaceBeforeParens: ControlStatements
SpacesInParentheses: false
SpacesInSquareBrackets: false

# --- Include Handling ---
# Your manual control settings
SortIncludes: false
IncludeBlocks: Preserve

IncludeCategories:
  - Regex: '^"{file_base}\\.h"$'
    Priority: 1
    SortPriority: 0
  - Regex: '^<[a-z0-9_]+\\.h>$'
    Priority: 2
    SortPriority: 1
  - Regex: '^<[a-zA-Z][a-zA-Z0-9_]*>$'
    Priority: 3
    SortPriority: 2
  - Regex: '.*'
    Priority: 4
    SortPriority: 3